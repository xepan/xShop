<div id="{$_name}" class="{$class}">
	{$Content}
	<div class="xshop-designer-itemimageslister row">
	{rows}
		{row}
		<figure class="xshop-designer-item-images col-md-3 col-sm-3">
			<img src="{item_image}{/}" class="xshop-designer-item-images thumbnail">
       		 <figcaption class="xshop-designer-add-replace">
            	<div class="xshop-designer-add-replace-button btn btn-primary" selectedimagesrc="{$item_image}">Add/Replace</div>
        	</figcaption>
    	</figure>
		{/}	
	{/}	
	</div>
	<script type="text/javascript">
		$( function() {
			//Load Designer Tool
			designer = $(".xshop-designer-tool").data("ui-xepan_xshopdesigner");
			// console.log(o);
			//Image Hover add or replace 
			$('.xshop-designer-item-images').hover( function(){
				$(this).find('.xshop-designer-add-replace').fadeIn(300);
			},function(){
				$(this).find('.xshop-designer-add-replace').fadeOut(100);
			});

			$(".xshop-designer-add-replace-button").click(function(){
				image_src = $(this).attr('selectedimagesrc');
				var opener = $('.xshop-designer-image-toolbtn').data('tool');
				// console.log(opener);
				if(opener.designer_tool.current_selected_component == undefined){
					opener.addImage(image_src);
					$(this).closest('.dialog').dialog('close');
				}else{
					opener.designer_tool.current_selected_component.options.replace_image = true;
					opener.designer_tool.current_selected_component.options.crop = false;
					opener.designer_tool.current_selected_component.options.url = image_src;
					
					if(opener.designer_tool.current_selected_component.options.type == "BackgroundImage"){
						xx= $('<div class="xshop-designer-backgroundimage-crop"></div>');
						crop_image = $('<img class="xshop-img" src='+image_src+'></img>').appendTo(xx);
						x = $('<div></div>').appendTo(crop_image);
						y = $('<div></div>').appendTo(crop_image);
						width = $('<div></div>').appendTo(crop_image);
						height = $('<div></div>').appendTo(crop_image);
						$(this).closest('.dialog').dialog('close');
						
						xx.dialog({
							minWidth: 800,
							modal:true,

							open: function( event, ui ) {

								$(crop_image).cropper({
								    multiple: true,
								    data: {
									    x: 480,
									    y: 60,
									    width: 640,
									    height: 360
									  },  
									done: function(data) {
										$(x).val(Math.round(data.x));
										$(y).val(Math.round(data.y));
										$(width).val(Math.round(data.width));
										$(height).val(Math.round(data.height));
									    // console.log(Math.round(data.width));
									  }
								});

					            var $titlebar = $.find('.ui-dialog-titlebar');
					            continue_btn = $('<button class="btn btn-default pull-right">Continue</button>').appendTo($titlebar);
								continue_btn.click(function(){
									opener.designer_tool.current_selected_component.options.crop_x = $(x).val();
									opener.designer_tool.current_selected_component.options.crop_y = $(y).val();
									opener.designer_tool.current_selected_component.options.crop_width = $(width).val();
									opener.designer_tool.current_selected_component.options.crop_height = $(height).val();
									opener.designer_tool.current_selected_component.options.crop = true;
									opener.designer_tool.current_selected_component.render();
									$('.xshop-designer-backgroundimage-crop').dialog('close');
								});
							},

							close: function( event, ui ) {
							}
						});	
					}else{
						$(this).closest('.dialog').dialog('close');
					}
					opener.designer_tool.current_selected_component.render();
					// console.log(opener.designer_tool.current_selected_component);
					// console.log('undefinedd');
				}

				
			});

		});
	</script>
</div>	